<tal:defines tal:define="datamaps_view context/@@data_and_maps_logic;">

    <tal:alldata metal:define-macro="datamaps"
                  tal:define="language python:request.get('Language');
                                      folderContents python: datamaps_view.getAllProducts() if not language else datamaps_view.getAllProducts(language=language);
                                      plone_view nocall:plone_view|context/@@plone;
                                      ajax python:True">

        <tal:folderContents condition="folderContents">
            <div metal:use-macro="here/frontpage_macros/macros/gallery-condition" />
        </tal:folderContents>

        <metal:languages tal:condition="not:folderContents">
            <tal:defines
                    tal:define="languages python:datamaps_view.getResultsInAllLanguages('getAllProducts')">
                <metal:results use-macro="here/articles_gallery_macro/macros/noresults" />
            </tal:defines>
        </metal:languages>

    </tal:alldata>

</tal:defines>
